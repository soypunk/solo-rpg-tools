!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).soloRPGTools={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var r=function(){function e(){n(this,e)}return a(e,[{key:"arrayToSentence",value:function(e){if(1==e.length)return e[0];var t=e.pop();return e.join(", ")+" and "+t}},{key:"capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"rollDie",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Math.floor(Math.random()*e);return t?++n:n}},{key:"rollDice",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0,a=[],r=e;e-- >0;){var l=this.rollDie(t,n);i+=l,a.push(l)}return{numSides:t,numRolled:r,diceRolls:a,total:i}}},{key:"getRandom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new Array(t),i=e.length,a=new Array(i);if(t>i)throw new RangeError("getRandom: more elements taken than available");for(;t--;){var r=Math.floor(Math.random()*i);n[t]=e[r in a?a[r]:r],a[r]=--i in a?a[i]:i}return n}},{key:"getClosestKey",value:function(e,t,n){if(e.hasOwnProperty(t))return t;var i=Object.keys(e);i.sort((function(e,t){return e-t}));for(var a,r=0;r<i.length;r++){if(Number(i[r])>t)return a===n?n:+a;a=i[r]}return+i[r-1]}},{key:"getClosetRolledMatch",value:function(e,t){for(var n=null,i=0;i<e.length;i++)if(t<=e[i][0]){n=e[i][1];break}return n}},{key:"getKeyByValue",value:function(e,t){return Object.keys(e).find((function(n){return e[n]===t}))}},{key:"isObject",value:function(e){return null!=e&&"object"===t(e)&&!1===Array.isArray(e)}},{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"areArraysEqualSets",value:function(e,n){for(var i={},a=0;a<e.length;a++){i[e[a]+t(e[a])]=1}for(var r=0;r<n.length;r++){var l=n[r]+t(n[r]);if(!i[l])return!1;i[l]=2}for(var o in i)if(1===i[o])return!1;return!0}}]),e}(),l=new r,o=function(){function e(){n(this,e),this._chaos=5,this._odds=5,this._acting=5,this._defending=5,this._fate=[[50,25,10,5,5,0,0,-20,-20,-40,-40,-55,-65],[75,50,25,15,10,5,5,0,0,-20,-20,-34,-45],[90,75,50,35,25,15,10,5,5,0,0,-15,-25],[95,85,65,50,45,25,15,10,5,5,5,-5,-15],[100,90,75,55,50,35,20,15,10,5,5,0,-10],[105,95,85,75,65,50,35,25,15,10,10,5,-5],[110,95,90,85,80,65,50,45,25,20,15,5,0],[115,100,95,90,85,75,55,50,35,25,20,10,5],[120,105,95,95,90,85,75,65,50,45,35,15,5],[125,115,100,95,95,90,80,75,55,50,45,20,10],[130,125,110,95,95,90,85,80,65,55,50,25,10],[150,145,130,100,100,95,95,90,85,80,75,50,25],[170,165,150,120,120,100,100,95,95,90,90,75,50]],this._eventFocus=[[7,"Remote event"],[28,"NPC action"],[35,"Introduce a new NPC"],[45,"Move toward a thread"],[52,"Move away from a thread"],[55,"Close a thread"],[67,"PC negative"],[75,"PC positive"],[83,"Ambiguous event"],[92,"NPC negative"],[100,"NPC positive"]],this._oddsLabels=["Impossible","No Way","Very unlikely","Unlikely","50/50","Somewhat likely","Likely","Very likely","Near sure thing","A sure thing","Has To Be"],this._rankLabels=["Miniscule 2+","Miniscule","Weak","Low","Below Average","Average","Above Average","High","Exceptional","Incredible","Awesome","Superhumna","Superhuman 2+"],this._eventMeaningActions=["Attainment","Starting","Neglect","Fight","Recruit","Triumph","Violate","Oppose","Malice","Communicate","Persecute","Increase","Decrease","Abandon","Gratify","Inquire","Antagonise","Move","Waste","Truce","Release","Befriend","Judge","Desert","Dominate","Procrastinate","Praise","Separate","Take","Break","Heal","Delay","Stop","Lie","Return","Immitate","Struggle","Inform","Bestow","Postpone","Expose","Haggle","Imprison","Release","Celebrate","Develop","Travel","Block","Harm","Debase","Overindulge","Adjourn","Adversity","Kill","Disrupt","Usurp","Create","Betray","Agree","Abuse","Oppress","Inspect","Ambush","Spy","Attach","Carry","Open","Carelessness","Ruin","Extravagance","Trick","Arrive","Propose","Divide","Refuse","Mistrust","Deceive","Cruelty","Intolerance","Trust","Excitement","Activity","Assist","Care","Negligence","Passion","Work hard","Control","Attract","Failure","Pursue","Vengeance","Proceedings","Dispute","Punish","Guide","Transform","Overthrow","Oppress","Change"],this._eventMeaningSubjects=["Goals","Dreams","Environment","Outside","Inside","Reality","Allies","Enemies","Evil","Good","Emotions","Opposition","War","Peace","The innocent","Love","The spiritual","The intellectual","New ideas","Joy","Messages","Energy","Balance","Tension","Friendship","The physical","A project","Pleasures","Pain","Possessions","Benefits","Plans","Lies","Expectations","Legal matters","Bureaucracy","Business","A path","News","Exterior factors","Advice","A plot","Competition","Prison","Illness","Food","Attention","Success","Failure","Travel","Jealousy","Dispute","Home","Investment","Suffering","Wishes","Tactics","Stalemate","Randomness","Misfortune","Death","Disruption","Power","A burden","Intrigues","Fears","Ambush","Rumor","Wounds","Extravagance","A representative","Adversities","Opulence","Liberty","Military","The mundane","Trials","Masses","Vehicle","Art","Victory","Dispute","Riches","Status quo","Technology","Hope","Magic","Illusions","Portals","Danger","Weapons","Animals","Weather","Elements","Nature","The public","Leadership","Fame","Anger","Information"],this._detailsChart=[[-4,"Anger"],[5,"Sadness"],[6,"Fear"],[7,"Disfavors Thread"],[8,"Disfavors PC"],[9,"Focus NPC"],[10,"Favors NPC"],[11,"Focus PC"],[12,"Disfavors NPC"],[13,"Focus Thread"],[14,"Favors NPC"],[15,"Favors Thread"],[16,"Courage"],[17,"Happiness"],[24,"Calm"]],this._modifierTable={1:4,2:3,3:2,4:1,5:0,6:1,7:2,8:3,9:4}}return a(e,[{key:"description",value:function(){var e=["Abnormally","Adventurously","Aggressively","Angrily","Anxiously","Awkwardly","Beautifully","Bleakly","Boldly","Bravely","Busily","Calmly","Carefully","Carelessly","Cautiously","Ceaselessly","Cheerfully","Combatively","Coolly","Crazily","Fully","Generously","Gently","Gladly","Gracefully","Gratefully","Happily","Hastily","Healthily","Helpfully","Helplessly","Hopelessly","Innocently","Intensely","Interestingly","Irritatingly","Jovially","Joyfully","Judgementally","Kindly","Peacefully","Perfectly","Playfully","Politely","Positively","Powerfully","Quaintly","Quarrelsomely","Quietly","Roughly","Rudely","Ruthlessly","Slowly","Softly","Swiftly","Threateningly","Very","Violently","Wildly","Yieldingly","Curiously","Daintily","Dangerously","Defiantly","Deliberately","Delightfully","Dimly","Efficiently","Energetically","Enormously","Enthusiastically","Excitedly","Fearfully","Ferociously","Fiercely","Foolishly","Fortunately","Frantically","Freely","Frighteningly","Kookily","Lazily","Lightly","Loosely","Loudly","Lovingly","Loyally","Majestically","Meaningfully","Mechanically","Miserably","Mockingly","Mysteriously","Naturally","Neatly","Nicely","Oddly","Offensively","Officially","Partially","Peacefully","Perfectly","Playfully","Politely","Positively","Powerfully","Quaintly","Quarrelsomely","Quietly","Roughly","Rudely","Ruthlessly","Slowly","Softly","Swiftly","Threateningly","Very","Violently","Wildly","Yieldingly"],t=["Abandoned","Abnormal","Amusing","Ancient","Aromatic","Average","Beautiful","Bizarre","Classy","Clean","Cold","Colorful","Creepy","Cute","Damaged","Dark","Defeated","Delicate","Delightful","Dirty","Graceful","Hard","Harsh","Healthy","Heavy","Historical","Horrible","Important","Interesting","Juvenile","Lacking","Lame","Large","Lavish","Lean","Less","Lethal","Lonely","Lovely","Macabre","Remarkable","Rotten","Rough","Ruined","Rustic","Scary","Simple","Small","Smelly","Smooth","Soft","Strong","Tranquil","Ugly","Valuable","Warlike","Warm","Watery","Weak","Young","Disagreeable","Disgusting","Drab","Dry","Dull","Empty","Enormous","Exotic","Faded","Familiar","Fancy","Fat","Feeble","Feminine","Festive","Flawless","Fresh","Full","Glorious","Good","Magnificent","Masculine","Mature","Messy","Mighty","Military","Modern","Extravagant","Mundane","Mysterious","Natural","Nondescript","Odd","Pale","Petite","Poor","Powerful","Quaint","Rare","Reassuring"],n=e[Math.floor(Math.random()*e.length)],i=t[Math.floor(Math.random()*t.length)];return"".concat(n," ").concat(i)}},{key:"action",value:function(){var e=["Attainment","Starting","Neglect","Fight","Recruit","Triumph","Violate","Oppose","Malice","Communicate","Persecute","Increase","Decrease","Abandon","Gratify","Inquire","Antagonize","Move","Waste","Truce","Expose","Haggle","Imprison","Release","Celebrate","Develop","Travel","Block","Harm","Debase","Overindulge","Adjourn","Adversity","Kill","Disrupt","Usurp","Create","Betray","Agree","Abuse","Excitement","Activity","Assist","Care","Negligence","Passion","Work","Control","Attract","Failure","Pursue","Vengeance","Proceedings","Dispute","Punish","Guide","Transform","Overthrow","Oppress","Change","Release","Befriend","Judge","Desert","Dominate","Procrastinate","Praise","Separate","Take","Break","Heal","Delay","Stop","Lie","Return","Imitate","Struggle","Inform","Bestow","Postpone","Oppress","Inspect","Ambush","Spy","Attach","Carry","Open","Carelessness","Ruin","Extravagance","Trick","Arrive","Propose","Divide","Refuse","Mistrust","Deceive","Cruelty","Intolerance","Trust"],t=["Goals","Dreams","Environment","Outside","Inside","Reality","Allies","Enemies","Evil","Good","Emotions","Opposition","War","Peace","Innocent","Love","Spirit","Intellect","Ideas","Joy","Advice","Plot","Competition","Prison","Illness","Food","Attention","Success","Failure","Travel","Jealousy","Dispute","Home","Investment","Suffering","Wishes","Tactics","Stalemate","Randomness","Misfortune","Victory","Dispute","Riches","Normal","Technology","Hope","Magic","Illusions","Portals","Danger","Weapons","Animals","Weather","Elements","Nature","Masses","Leadership","Fame","Anger","Information","Messages","Energy","Balance","Tension","Friendship","Physical","Project","Pleasures","Pain","Possessions","Benefits","Plans","Lies","Expectations","Legal","Bureaucracy","Business","Path","News","Exterior","Death","Disruption","Power","Burden","Intrigues","Fears","Ambush","Rumor","Wounds","Extravagance","Representative","Adversities","Opulence","Liberty","Military","Mundane","Trials","Masses","Vehicle","Art"],n=e[Math.floor(Math.random()*e.length)],i=t[Math.floor(Math.random()*t.length)];return"".concat(n," ").concat(i)}},{key:"event",value:function(){var e=l.rollDice(1,100),t=l.getClosetRolledMatch(this.eventFocusChart,e.total),n=l.rollDice(2,100,!1);return{focus:t,action:this.eventMeaningActions[n.diceRolls[0]],subject:this.eventMeaningSubjects[n.diceRolls[1]],dice:{total:e.total,rolls:e.diceRolls.concat(n.diceRolls)}}}},{key:"detail",value:function(){var e=this.modifierTable[this.chaos];this.chaos>5&&(e=-Math.abs(e));var t=l.rollDice(2,10);return t.total=t.total+e,{detail:l.getClosetRolledMatch(this.detailsChart,t.total),dice:{total:t.total,rolls:t.diceRolls}}}},{key:"yesNoQuestion",value:function(e,t){var n=l.rollDice(2,10,!1),i=n.diceRolls[0],a=n.diceRolls[1],r=i+a===0?100:10*i+a,o=!1;i===a&&i<=this.chaos&&100!=r&&(o=this.event());var s=this.fateChart[e][t],u=Math.floor(s/5),c=s<100?100-Math.floor((100-s)/5)+1:0;return{answer:r<=u?"Exceptional Yes!":r<=s?"Yes":r<c?"No":"Exceptional No!",dice:{total:r,rolls:n.diceRolls},critYes:u,critNo:c,event:o}}},{key:"sceneSetup",value:function(){var e=l.rollDice(1,10),t="Scene unchanged",n=!1;return e.total<=this.chaos&&(n=this.event(),t=2*e.total<this.chaos+2?"Scene altered":"Scene interupted!"),{status:t,event:n,dice:{total:e.total,rolls:e.diceRolls}}}},{key:"statCheck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=e=Number(e),s="",u=l.rollDice(2,10),c=u.total;t&&(c+=2),n&&(c+=4);for(var y=0;y<i;y++)c-=2;for(y=0;y<a;y++)c+=2;if(c<3)e-=.75*e,s="Very Weak -75%";else if(c<5){e-=.5*e,s="Weak -50%"}else if(c<7){e-=.1*e,s="Less -10%"}else if(c<12)s="Expected Baseline";else if(c<15){e+=.1*e,s="More +10%"}else if(c<17){e+=.5*e,s="Strong +50%"}else if(c<19){e+=1*e,s="Very Strong +100%"}else if(c<21)s="PC Baseline";else if(c<23){e+=.1*e,s="PC More +10%"}else if(c<25){e+=.5*e,s="PC Strong +50%"}else if(c<27){e+=1*e,s="PC Very Strong +100%"}return o!=Number(0)&&null!==o&&r&&(e=Math.round(e)),{result:s,value:e,dice:{rolls:u.diceRolls,total:c}}}},{key:"chaos",get:function(){return this._chaos},set:function(e){if(!(e>=1&&e<=9))throw"Chaos value is out of range, must be between 1 and 9";this._chaos=e}},{key:"odds",get:function(){return this._odds},set:function(e){this._odds=e}},{key:"acting",get:function(){return this._acting},set:function(e){this._acting=e}},{key:"defending",get:function(){return this._defending},set:function(e){this._defending=e}},{key:"fateChart",get:function(){return this._fate}},{key:"eventFocusChart",get:function(){return this._eventFocus}},{key:"eventMeaningActions",get:function(){return this._eventMeaningActions}},{key:"eventMeaningSubjects",get:function(){return this._eventMeaningSubjects}},{key:"oddsLabels",get:function(){return this._oddsLabels}},{key:"rankLabels",get:function(){return this._rankLabels}},{key:"modifierTable",get:function(){return this._modifierTable}},{key:"detailsChart",get:function(){return this._detailsChart}}]),e}();e.AdventureCrafter=o,e.MythicGME=o,e.Utils=r,Object.defineProperty(e,"__esModule",{value:!0})}));
