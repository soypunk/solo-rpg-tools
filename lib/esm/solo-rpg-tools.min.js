class e{constructor(){}arrayToSentence(e){if(1==e.length)return e[0];let t=e.pop();return e.join(", ")+" and "+t}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}clamp(e,t,l){return Math.min(Math.max(e,t),l)}rollDie(e=6,t=!0){let l=Math.floor(Math.random()*e);return t?++l:l}rollDice(e=1,t=6,l=!0){for(var a=0,r=[],s=e;e-- >0;){let e=this.rollDie(t,l);a+=e,r.push(e)}return{numSides:t,numRolled:s,diceRolls:r,total:a}}getRandom(e,t=1){let l=new Array(t),a=e.length,r=new Array(a);if(t>a)throw new RangeError("getRandom: more elements taken than available");for(;t--;){let s=Math.floor(Math.random()*a);l[t]=e[s in r?r[s]:s],r[s]=--a in r?r[a]:a}return l}getClosestKey(e,t,l){if(e.hasOwnProperty(t))return t;let a=Object.keys(e);a.sort((function(e,t){return e-t}));for(var r,s=0;s<a.length;s++){if(Number(a[s])>t)return r===l?l:+r;r=a[s]}return+a[s-1]}getClosetRolledMatch(e,t){let l=null;for(var a=0;a<e.length;a++)if(t<=e[a][0]){l=e[a][1];break}return l}getKeyByValue(e,t){return Object.keys(e).find(l=>e[l]===t)}isObject(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}areArraysEqualSets(e,t){let l={};for(let t=0;t<e.length;t++){l[e[t]+typeof e[t]]=1}for(let e=0;e<t.length;e++){const a=t[e]+typeof t[e];if(!l[a])return!1;l[a]=2}for(let e in l)if(1===l[e])return!1;return!0}}const t=new e;class l{constructor(){this._chaos=5,this._odds=5,this._acting=5,this._defending=5,this._fate=[[50,25,10,5,5,0,0,-20,-20,-40,-40,-55,-65],[75,50,25,15,10,5,5,0,0,-20,-20,-34,-45],[90,75,50,35,25,15,10,5,5,0,0,-15,-25],[95,85,65,50,45,25,15,10,5,5,5,-5,-15],[100,90,75,55,50,35,20,15,10,5,5,0,-10],[105,95,85,75,65,50,35,25,15,10,10,5,-5],[110,95,90,85,80,65,50,45,25,20,15,5,0],[115,100,95,90,85,75,55,50,35,25,20,10,5],[120,105,95,95,90,85,75,65,50,45,35,15,5],[125,115,100,95,95,90,80,75,55,50,45,20,10],[130,125,110,95,95,90,85,80,65,55,50,25,10],[150,145,130,100,100,95,95,90,85,80,75,50,25],[170,165,150,120,120,100,100,95,95,90,90,75,50]],this._eventFocus=[[7,"Remote event"],[28,"NPC action"],[35,"Introduce a new NPC"],[45,"Move toward a thread"],[52,"Move away from a thread"],[55,"Close a thread"],[67,"PC negative"],[75,"PC positive"],[83,"Ambiguous event"],[92,"NPC negative"],[100,"NPC positive"]],this._oddsLabels=["Impossible","No Way","Very unlikely","Unlikely","50/50","Somewhat likely","Likely","Very likely","Near sure thing","A sure thing","Has To Be"],this._rankLabels=["Miniscule 2+","Miniscule","Weak","Low","Below Average","Average","Above Average","High","Exceptional","Incredible","Awesome","Superhumna","Superhuman 2+"],this._eventMeaningActions=["Attainment","Starting","Neglect","Fight","Recruit","Triumph","Violate","Oppose","Malice","Communicate","Persecute","Increase","Decrease","Abandon","Gratify","Inquire","Antagonise","Move","Waste","Truce","Release","Befriend","Judge","Desert","Dominate","Procrastinate","Praise","Separate","Take","Break","Heal","Delay","Stop","Lie","Return","Immitate","Struggle","Inform","Bestow","Postpone","Expose","Haggle","Imprison","Release","Celebrate","Develop","Travel","Block","Harm","Debase","Overindulge","Adjourn","Adversity","Kill","Disrupt","Usurp","Create","Betray","Agree","Abuse","Oppress","Inspect","Ambush","Spy","Attach","Carry","Open","Carelessness","Ruin","Extravagance","Trick","Arrive","Propose","Divide","Refuse","Mistrust","Deceive","Cruelty","Intolerance","Trust","Excitement","Activity","Assist","Care","Negligence","Passion","Work hard","Control","Attract","Failure","Pursue","Vengeance","Proceedings","Dispute","Punish","Guide","Transform","Overthrow","Oppress","Change"],this._eventMeaningSubjects=["Goals","Dreams","Environment","Outside","Inside","Reality","Allies","Enemies","Evil","Good","Emotions","Opposition","War","Peace","The innocent","Love","The spiritual","The intellectual","New ideas","Joy","Messages","Energy","Balance","Tension","Friendship","The physical","A project","Pleasures","Pain","Possessions","Benefits","Plans","Lies","Expectations","Legal matters","Bureaucracy","Business","A path","News","Exterior factors","Advice","A plot","Competition","Prison","Illness","Food","Attention","Success","Failure","Travel","Jealousy","Dispute","Home","Investment","Suffering","Wishes","Tactics","Stalemate","Randomness","Misfortune","Death","Disruption","Power","A burden","Intrigues","Fears","Ambush","Rumor","Wounds","Extravagance","A representative","Adversities","Opulence","Liberty","Military","The mundane","Trials","Masses","Vehicle","Art","Victory","Dispute","Riches","Status quo","Technology","Hope","Magic","Illusions","Portals","Danger","Weapons","Animals","Weather","Elements","Nature","The public","Leadership","Fame","Anger","Information"],this._detailsChart=[[-4,"Anger"],[5,"Sadness"],[6,"Fear"],[7,"Disfavors Thread"],[8,"Disfavors PC"],[9,"Focus NPC"],[10,"Favors NPC"],[11,"Focus PC"],[12,"Disfavors NPC"],[13,"Focus Thread"],[14,"Favors NPC"],[15,"Favors Thread"],[16,"Courage"],[17,"Happiness"],[24,"Calm"]],this._modifierTable={1:4,2:3,3:2,4:1,5:0,6:1,7:2,8:3,9:4}}get chaos(){return this._chaos}set chaos(e){if(!(e>=1&&e<=9))throw"Chaos value is out of range, must be between 1 and 9";this._chaos=e}get odds(){return this._odds}set odds(e){this._odds=e}get acting(){return this._acting}set acting(e){this._acting=e}get defending(){return this._defending}set defending(e){this._defending=e}get fateChart(){return this._fate}get eventFocusChart(){return this._eventFocus}get eventMeaningActions(){return this._eventMeaningActions}get eventMeaningSubjects(){return this._eventMeaningSubjects}get oddsLabels(){return this._oddsLabels}get rankLabels(){return this._rankLabels}get modifierTable(){return this._modifierTable}get detailsChart(){return this._detailsChart}description(){let e=["Abnormally","Adventurously","Aggressively","Angrily","Anxiously","Awkwardly","Beautifully","Bleakly","Boldly","Bravely","Busily","Calmly","Carefully","Carelessly","Cautiously","Ceaselessly","Cheerfully","Combatively","Coolly","Crazily","Fully","Generously","Gently","Gladly","Gracefully","Gratefully","Happily","Hastily","Healthily","Helpfully","Helplessly","Hopelessly","Innocently","Intensely","Interestingly","Irritatingly","Jovially","Joyfully","Judgementally","Kindly","Peacefully","Perfectly","Playfully","Politely","Positively","Powerfully","Quaintly","Quarrelsomely","Quietly","Roughly","Rudely","Ruthlessly","Slowly","Softly","Swiftly","Threateningly","Very","Violently","Wildly","Yieldingly","Curiously","Daintily","Dangerously","Defiantly","Deliberately","Delightfully","Dimly","Efficiently","Energetically","Enormously","Enthusiastically","Excitedly","Fearfully","Ferociously","Fiercely","Foolishly","Fortunately","Frantically","Freely","Frighteningly","Kookily","Lazily","Lightly","Loosely","Loudly","Lovingly","Loyally","Majestically","Meaningfully","Mechanically","Miserably","Mockingly","Mysteriously","Naturally","Neatly","Nicely","Oddly","Offensively","Officially","Partially","Peacefully","Perfectly","Playfully","Politely","Positively","Powerfully","Quaintly","Quarrelsomely","Quietly","Roughly","Rudely","Ruthlessly","Slowly","Softly","Swiftly","Threateningly","Very","Violently","Wildly","Yieldingly"],t=["Abandoned","Abnormal","Amusing","Ancient","Aromatic","Average","Beautiful","Bizarre","Classy","Clean","Cold","Colorful","Creepy","Cute","Damaged","Dark","Defeated","Delicate","Delightful","Dirty","Graceful","Hard","Harsh","Healthy","Heavy","Historical","Horrible","Important","Interesting","Juvenile","Lacking","Lame","Large","Lavish","Lean","Less","Lethal","Lonely","Lovely","Macabre","Remarkable","Rotten","Rough","Ruined","Rustic","Scary","Simple","Small","Smelly","Smooth","Soft","Strong","Tranquil","Ugly","Valuable","Warlike","Warm","Watery","Weak","Young","Disagreeable","Disgusting","Drab","Dry","Dull","Empty","Enormous","Exotic","Faded","Familiar","Fancy","Fat","Feeble","Feminine","Festive","Flawless","Fresh","Full","Glorious","Good","Magnificent","Masculine","Mature","Messy","Mighty","Military","Modern","Extravagant","Mundane","Mysterious","Natural","Nondescript","Odd","Pale","Petite","Poor","Powerful","Quaint","Rare","Reassuring"];return`${e[Math.floor(Math.random()*e.length)]} ${t[Math.floor(Math.random()*t.length)]}`}action(){let e=["Attainment","Starting","Neglect","Fight","Recruit","Triumph","Violate","Oppose","Malice","Communicate","Persecute","Increase","Decrease","Abandon","Gratify","Inquire","Antagonize","Move","Waste","Truce","Expose","Haggle","Imprison","Release","Celebrate","Develop","Travel","Block","Harm","Debase","Overindulge","Adjourn","Adversity","Kill","Disrupt","Usurp","Create","Betray","Agree","Abuse","Excitement","Activity","Assist","Care","Negligence","Passion","Work","Control","Attract","Failure","Pursue","Vengeance","Proceedings","Dispute","Punish","Guide","Transform","Overthrow","Oppress","Change","Release","Befriend","Judge","Desert","Dominate","Procrastinate","Praise","Separate","Take","Break","Heal","Delay","Stop","Lie","Return","Imitate","Struggle","Inform","Bestow","Postpone","Oppress","Inspect","Ambush","Spy","Attach","Carry","Open","Carelessness","Ruin","Extravagance","Trick","Arrive","Propose","Divide","Refuse","Mistrust","Deceive","Cruelty","Intolerance","Trust"],t=["Goals","Dreams","Environment","Outside","Inside","Reality","Allies","Enemies","Evil","Good","Emotions","Opposition","War","Peace","Innocent","Love","Spirit","Intellect","Ideas","Joy","Advice","Plot","Competition","Prison","Illness","Food","Attention","Success","Failure","Travel","Jealousy","Dispute","Home","Investment","Suffering","Wishes","Tactics","Stalemate","Randomness","Misfortune","Victory","Dispute","Riches","Normal","Technology","Hope","Magic","Illusions","Portals","Danger","Weapons","Animals","Weather","Elements","Nature","Masses","Leadership","Fame","Anger","Information","Messages","Energy","Balance","Tension","Friendship","Physical","Project","Pleasures","Pain","Possessions","Benefits","Plans","Lies","Expectations","Legal","Bureaucracy","Business","Path","News","Exterior","Death","Disruption","Power","Burden","Intrigues","Fears","Ambush","Rumor","Wounds","Extravagance","Representative","Adversities","Opulence","Liberty","Military","Mundane","Trials","Masses","Vehicle","Art"];return`${e[Math.floor(Math.random()*e.length)]} ${t[Math.floor(Math.random()*t.length)]}`}event(){let e=t.rollDice(1,100),l=t.getClosetRolledMatch(this.eventFocusChart,e.total),a=t.rollDice(2,100,!1);return{focus:l,action:this.eventMeaningActions[a.diceRolls[0]],subject:this.eventMeaningSubjects[a.diceRolls[1]],dice:{total:e.total,rolls:e.diceRolls.concat(a.diceRolls)}}}detail(){let e=this.modifierTable[this.chaos];this.chaos>5&&(e=-Math.abs(e));let l=t.rollDice(2,10);return l.total=l.total+e,{detail:t.getClosetRolledMatch(this.detailsChart,l.total),dice:{total:l.total,rolls:l.diceRolls}}}yesNoQuestion(e,l){let a=t.rollDice(2,10,!1),r=a.diceRolls[0],s=a.diceRolls[1],i=r+s===0?100:10*r+s,n=!1;r===s&&r<=this.chaos&&100!=i&&(n=this.event());let o=this.fateChart[e][l],u=Math.floor(o/5),c=o<100?100-Math.floor((100-o)/5)+1:0,y="unknown";return y=i<=u?"Exceptional Yes!":i<=o?"Yes":i<c?"No":"Exceptional No!",{answer:y,dice:{total:i,rolls:a.diceRolls},critYes:u,critNo:c,event:n}}sceneSetup(){let e=t.rollDice(1,10),l="Scene unchanged",a=!1;return e.total<=this.chaos&&(a=this.event(),l=2*e.total<this.chaos+2?"Scene altered":"Scene interupted!"),{status:l,event:a,dice:{total:e.total,rolls:e.diceRolls}}}statCheck(e=null,l=!1,a=!1,r=0,s=0,i=!0){let n=e=Number(e),o="",u=t.rollDice(2,10),c=u.total;l&&(c+=2),a&&(c+=4);for(var y=0;y<r;y++)c-=2;for(y=0;y<s;y++)c+=2;if(c<3)e-=.75*e,o="Very Weak -75%";else if(c<5){e-=.5*e,o="Weak -50%"}else if(c<7){e-=.1*e,o="Less -10%"}else if(c<12)o="Expected Baseline";else if(c<15){e+=.1*e,o="More +10%"}else if(c<17){e+=.5*e,o="Strong +50%"}else if(c<19){e+=1*e,o="Very Strong +100%"}else if(c<21)o="PC Baseline";else if(c<23){e+=.1*e,o="PC More +10%"}else if(c<25){e+=.5*e,o="PC Strong +50%"}else if(c<27){e+=1*e,o="PC Very Strong +100%"}return n!=Number(0)&&null!==n&&i&&(e=Math.round(e)),{result:o,value:e,dice:{rolls:u.diceRolls,total:c}}}}export{l as AdventureCrafter,l as MythicGME,e as Utils};
